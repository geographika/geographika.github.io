<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4. Symbols and Symbolizing Data &#8212; MapServer 7.0.2 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '7.0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="MapServer 7.0.2 documentation" href="../../index.html" />
    <link rel="up" title="MapServer Tutorials" href="../index.html" />
    <link rel="next" title="5. Labelling Data" href="labelling.html" />
    <link rel="prev" title="3. Testing your Mapfiles with shp2img" href="test_mapfiles.html" /> 
  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../../index.html" title="Home"><img src="../../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../../index.html" title="Home">Home</a> |
      <a href="../../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../../community/service_providers.html" title="Professional Service Providers">Service Providers</a> |      
      <a href="../../faq.html" title="Frequently Asked Questions">FAQ</a> |
      <a href="../../download.html" title="Download Source or Binaries">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../../de/tutorial/quickstart/symbolizing.html"><img src="../../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../../es/tutorial/quickstart/symbolizing.html"><img src="../../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../../zh_cn/tutorial/quickstart/symbolizing.html"><img src="../../_static/flagicons/zh_cn.png" alt="zh_cn" title="zh_cn" border="0" /></a>
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="labelling.html" title="5. Labelling Data"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="test_mapfiles.html" title="3. Testing your Mapfiles with shp2img"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../documentation.html" >MapServer 7.0.2 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" accesskey="U">MapServer Tutorials</a> &#187;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="symbols-and-symbolizing-data">
<span id="qs-symbolizing"></span><h1>4. Symbols and Symbolizing Data<a class="headerlink" href="#symbols-and-symbolizing-data" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial, you will see some more options on symbolizing MapServer layers. We
previously looked at <a class="reference internal" href="../../mapfile/style.html#style"><span class="std std-ref">STYLE</span></a> and set colors and line thicknesses. In this tutorial we will
be using <a class="reference internal" href="../../mapfile/symbol.html#symbol"><span class="std std-ref">SYMBOL</span></a>. These are shapes and signs that can be used to display data in different ways,
often symbols are shared between different mapfiles and projects.</p>
<p>The first symbol is a simple circle. Symbols require a <code class="docutils literal"><span class="pre">NAME</span></code> attribute,
so they can be referred to elsewhere in the mapfile. Its type here is <code class="docutils literal"><span class="pre">ellipse</span></code>. The <code class="docutils literal"><span class="pre">POINTS</span></code> property
defines the X and Y radius of the ellipse. In this case both are set to 1, which produces a circle
rather than an ellipse. The <code class="docutils literal"><span class="pre">FILLED</span></code> property means it is a solid circle, rather than a hollow
outline.</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">SYMBOL</span>
    <span class="c"># Symbol name (referenced in STYLEs)</span>
    <span class="k">NAME</span> <span class="s">&#39;CIRCLE&#39;</span>
    <span class="k">TYPE</span> <span class="nb">ellipse</span> <span class="c"># Type of symbol</span>
    <span class="k">POINTS</span>
        <span class="mi">1</span> <span class="mi">1</span>
    <span class="k">END</span>      
    <span class="k">FILLED</span> <span class="nb">true</span> <span class="c"># The symbol should be filled</span>
<span class="k">END</span>
</pre></div>
</div>
<p>The second symbol is a based on an image file. Its type is <code class="docutils literal"><span class="pre">pixmap</span></code> -
which means it is simply a small raster image. The image file needs to be stored locally,
and can be either a PNG or GIF.</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">SYMBOL</span>
    <span class="k">NAME</span> <span class="s">&#39;MAP_PIN&#39;</span>
    <span class="k">TYPE</span> <span class="nb">pixmap</span>
    <span class="k">IMAGE</span> <span class="s">&#39;map_pin.png&#39;</span>
<span class="k">END</span> 
</pre></div>
</div>
<p>The final symbol used is a <code class="docutils literal"><span class="pre">vector</span></code> symbol. This again uses a <code class="docutils literal"><span class="pre">POINTS</span></code> property which
can be used to create any shape. Here we create an inverted V shape. When this is used to fill
in a polygon feature it looks like a wave.</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">SYMBOL</span> 
    <span class="k">NAME</span> <span class="s">&#39;WAVES&#39;</span>
    <span class="k">TYPE</span> <span class="nb">vector</span>    
    <span class="k">POINTS</span>         
        <span class="mi">0</span> <span class="mi">0</span>        
        <span class="mi">1</span> <span class="mi">1</span>        
        <span class="mi">2</span> <span class="mi">0</span>        
    <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>The remaining symbol types <code class="docutils literal"><span class="pre">hatch</span></code>, <code class="docutils literal"><span class="pre">svg</span></code>, and <code class="docutils literal"><span class="pre">truetype</span></code> (fonts) are not demonstrated here.</p>
<div class="section" id="example">
<h2>4.1. Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>You should be able to use the appropriate HTML and mapfiles to create the example below using your local
MapServer.</p>
<!DOCTYPE html>
<html>
<head>
    <title>Mapserver OL3 viewer</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.18.2/ol.css" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.18.2/ol.js"></script>

    <style>
        #settings input[type=text], select {
            width: 100%;
            padding: 12px 20px;
            margin: 8px 0;
            display: inline-block;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        #settings input[type=submit] {
            width: 100%;
            background-color: #6B6BD1;
            color: white;
            padding: 14px 20px;
            margin: 8px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        #settings input[type=submit]:hover {
            background-color: #3333A4;
        }

        #map {
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

    <div id="settings">
        <form>
            <label for="mapserver-url">MapServer URL: </label>
            <input type="text" id="mapserver-url" value="http://mapserver.geographika.co.uk/cgi-bin/mapserv">
            <label for="mapfile-path">Map file path</label>
            <input type="text" id="mapfile-path" value="/u02/mapfiles/symbolizing.map">

            <label for="radio-1">Style 1</label>
            <input id="radio-1" type="radio" name="style-radio" onclick="handleClick(this);" value="style1" checked="checked" />
            <label for="radio-2">Style 2</label>
            <input id="radio-2" type="radio" name="style-radio" onclick="handleClick(this);" value="style2" />


            <input type="submit" id="validate-btn" value="Update">
        </form>
    </div>
    <div id="map" class="map"></div>
    <script>

        // add endsWith function for older browsers

        if (typeof String.prototype.endsWith !== 'function') {
            String.prototype.endsWith = function (suffix) {
                return this.indexOf(suffix, this.length - suffix.length) !== -1;
            }
        };

        var map = new ol.Map({
            target: 'map',
            view: new ol.View({
                center: [0, 0],
                zoom: 2,
                projection: 'EPSG:4326'
            })
        });

        document.getElementById('validate-btn').addEventListener('click', handleUpdate);
        updateLayers();

        function handleClick(selectedRadio) {
            var val = selectedRadio.value;
            var styles = val + ',' + val + ',' + val;
            updateLayers(styles);
        }

        function handleUpdate(e) {

            if (e) {
                e.preventDefault();
            }
            updateLayers();
        }

        function updateLayers(styles) {

            if (!styles) {
                styles = 'style1,style1,style1';
            }

            var msAddress = document.getElementById('mapserver-url').value;
            if (!msAddress.endsWith('?')) {
                msAddress += '?';
            }
            var mapfilePath = document.getElementById('mapfile-path').value;
            mapfilePath = 'MAP=' + mapfilePath;
            map.getLayers().getArray().forEach(function (layer) {
                map.removeLayer(layer);
            });

            var layer = new ol.layer.Image({
                source: new ol.source.ImageWMS({
                    url: msAddress + mapfilePath,
                    params: {
                        LAYERS: 'ocean,land,places',
                        STYLES: styles,
                        CRS: 'epsg:4326',
                        VERSION: '1.3.0',
                        EXCEPTIONS: 'INIMAGE'
                    },
                    serverType: 'mapserver'
                })
            });
            map.addLayer(layer);
        }
    </script>
</body>
</html>
<p>OpenLayer is drawing a single combined image containing all the layers in the map. You can right-click on the image
to save it locally.</p>
</div>
<div class="section" id="switching-styles">
<h2>4.2. Switching Styles<a class="headerlink" href="#switching-styles" title="Permalink to this headline">¶</a></h2>
<p>Your mapfile should look like the one here - <a class="reference internal" href="symbolizing.map.html#qs-symbolizing-map"><span class="std std-ref">symbolizing.map</span></a>.
There are three layers in the mapfile - land, ocean, and places.</p>
<p>Each layer has two classes. This allows each layer to be represented in two different ways.
Let&#8217;s look at the layer configuration for places below:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
    <span class="k">NAME</span> <span class="s">&#39;places&#39;</span>
    <span class="k">TYPE</span> <span class="nb">POINT</span>
    <span class="k">DATA</span> <span class="s">&#39;../data/vector/naturalearth/ne_110m_populated_places&#39;</span>
    <span class="k">CLASSGROUP</span> <span class="s">&#39;style1&#39;</span> <span class="c"># this is the default style to use</span>
    <span class="k">CLASS</span>
        <span class="k">GROUP</span> <span class="s">&#39;style1&#39;</span>
        <span class="k">STYLE</span>
            <span class="k">SYMBOL</span> <span class="s">&#39;CIRCLE&#39;</span> <span class="c"># this must correspond to the NAME of a SYMBOL object</span>
            <span class="k">COLOR</span>  <span class="mi">255</span> <span class="mi">153</span> <span class="mi">51</span> <span class="c"># the color in which the symbol will be filled</span>
            <span class="k">SIZE</span> <span class="mi">8</span> <span class="c"># the size of the symbol</span>
            <span class="k">OUTLINECOLOR</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span>
        <span class="k">END</span>
    <span class="k">END</span>

    <span class="k">CLASS</span>
        <span class="k">GROUP</span> <span class="s">&#39;style2&#39;</span>
        <span class="k">STYLE</span>
            <span class="k">SYMBOL</span> <span class="s">&#39;MAP_PIN&#39;</span>
            <span class="k">SIZE</span> <span class="mi">16</span> <span class="c"># the size of the symbol</span>
        <span class="k">END</span>        
    <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>The <span class="xref std std-ref">CLASSGROUP</span> keyword defines which of the classes to use. Each <a class="reference internal" href="../../mapfile/class.html#class"><span class="std std-ref">CLASS</span></a> has a <code class="docutils literal"><span class="pre">GROUP</span></code>
parameter. When this matches the <code class="docutils literal"><span class="pre">CLASSGROUP</span></code> it will be used to style the layer. If no <code class="docutils literal"><span class="pre">CLASSGROUP</span></code> is
set, then the first <code class="docutils literal"><span class="pre">CLASS</span></code> defined in the layer will be used.</p>
<p>The client application, in this case OpenLayers, can change the setting for <code class="docutils literal"><span class="pre">CLASSGROUP</span></code> via
the querystring. This is done using the <code class="docutils literal"><span class="pre">STYLES</span></code> option of the WMS GetMap request. When you click on the radio
buttons above the querystring sent to MapServer includes the three layers to display in the image
as well as the three styles to apply to the layers.</p>
<p>The order of style names matches the order of layer names in the <code class="docutils literal"><span class="pre">LAYERS</span></code> parameter:</p>
<div class="code bat highlight-default"><div class="highlight"><pre><span></span>?SERVICE=WMS&amp;VERSION=1.3.0&amp;REQUEST=GetMap&amp;LAYERS=ocean,land,places&amp;STYLES=style1,style1,style1
?SERVICE=WMS&amp;VERSION=1.3.0&amp;REQUEST=GetMap&amp;LAYERS=ocean,land,places&amp;STYLES=style2,style2,style2
</pre></div>
</div>
<p>If no styles are sent in the URL, then the default style for the layer specified in <code class="docutils literal"><span class="pre">CLASSGROUP</span></code>
will be used.</p>
<p><a class="reference internal" href="../index.html#tutorial"><span class="std std-ref">Back to tutorial index</span></a> | <a class="reference internal" href="test_mapfiles.html#qs-test-mapfiles"><span class="std std-ref">Back to previous tutorial</span></a> | <a class="reference internal" href="labelling.html#qs-labelling"><span class="std std-ref">Proceed to next tutorial</span></a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<p>
<a href="../../about.html" title="About">About</a><br>
<a href="../../products.html" title="Products">Products</a><br>
<a href="../../community/index.html" title="Community">Community</a><br>
<a href="../../development/index.html" title="Development">Development</a><br>
<a href="../../download.html" title="Downloads">Downloads</a><br>
<a href="../../documentation.html" title="Documentation">Documentation</a><br>
<a href="../../faq.html" title="FAQ">FAQ</a><br>
<a href="../../psc.html" title="PSC">PSC</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4. Symbols and Symbolizing Data</a><ul>
<li><a class="reference internal" href="#example">4.1. Example</a></li>
<li><a class="reference internal" href="#switching-styles">4.2. Switching Styles</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="labelling.html" title="5. Labelling Data"
             >next</a> |</li>
        <li class="right" >
          <a href="test_mapfiles.html" title="3. Testing your Mapfiles with shp2img"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Home</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../documentation.html" >MapServer 7.0.2 Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >MapServer Tutorials</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../../copyright.html">Copyright</a> 2016, Open Source Geospatial Foundation.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>