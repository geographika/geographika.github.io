<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MS RFC 73: Improved SVG symbols support &#8212; MapServer 7.0.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '7.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="MapServer 7.0.0 documentation" href="../../index.html" />
    <link rel="up" title="Request for Comments" href="index.html" />
    <link rel="next" title="MS RFC 74: Includes from non-file connections (eg Databases)" href="ms-rfc-74.html" />
    <link rel="prev" title="MS RFC 72: Layer and Label-Level Geomtransforms" href="ms-rfc-72.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../../index.html" title="Home"><img src="../../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../../index.html" title="Home">Home</a> |
      <a href="../../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../../faq.html" title="FAQ">FAQ</a> |
      <a href="../../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../../de/development/rfc/ms-rfc-73.html"><img src="../../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../../es/development/rfc/ms-rfc-73.html"><img src="../../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../../zh_cn/development/rfc/ms-rfc-73.html"><img src="../../_static/flagicons/zh_cn.png" alt="zh_cn" title="zh_cn" border="0" /></a>
        

    </td>
  </tr>
</table>



  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ms-rfc-73-improved-svg-symbols-support">
<span id="rfc73"></span><h1>MS RFC 73: Improved SVG symbols support<a class="headerlink" href="#ms-rfc-73-improved-svg-symbols-support" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">2011/05/19</td>
</tr>
<tr class="field-even field"><th class="field-name">Authors:</th><td class="field-body">Zak James (zjames at dmsolutions.ca)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Yewondwossen Assefa (yassefa at dmsolutions.ca)</td>
</tr>
<tr class="field-even field"><th class="field-name">Last Edited:</th><td class="field-body">2011/05/19</td>
</tr>
<tr class="field-odd field"><th class="field-name">Status:</th><td class="field-body">Proposed</td>
</tr>
<tr class="field-even field"><th class="field-name">Version:</th><td class="field-body">MapServer 6.2</td>
</tr>
</tbody>
</table>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The SVG format offers several advantages over existing mapserver symbol types
but existing support is limited. We propose the implementation of complete
support using the libsvg-cairo library, part of the cairo project.</p>
</div>
<div class="section" id="technical-solution">
<h2>Technical Solution<a class="headerlink" href="#technical-solution" title="Permalink to this headline">¶</a></h2>
<p>All renderers will be extended with an added supports_svg flag, set to 0 for
all but the cairo renderer. When an SVG symbol is requested, other renderers
will trigger a call to msRenderSVGToPixmap which will parse the referenced svg
file (using libsvg-cairo) and render the svg into the symbol&#8217;s pixmapbuffer
using cairo. After this operation, normal pixmap symbol handling will be used.</p>
<p>For the cairo renderer, the renderSVGSymbolCairo function will use libsvg-cairo
to parse the symbol, but will then use the cairo api to render the symbol
directly.</p>
<p>Configure.in will be modified to detect the &#8211;with-libsvg-cairo configure
option and define USE_LIBSVG_CAIRO.</p>
</div>
<div class="section" id="existing-partial-implementation">
<h2>Existing Partial Implementation<a class="headerlink" href="#existing-partial-implementation" title="Permalink to this headline">¶</a></h2>
<p>If this rfc is adopted the existing SVG symbol code
(see <a class="reference external" href="https://github.com/mapserver/mapserver/issues/3343">https://github.com/mapserver/mapserver/issues/3343</a>) would be superseded
and would be removed.</p>
<p>The proposed implementation will reuse the existing changes to the parser
but the approach for reading and rendering the symbols would be different.
It will use an existing SVG parser which includes a more complete SVG
implementation and will pass through the SVG instructions directly in
the case of a cairo (pdf or postscript) outputformat to improve
quality. Additionally, this version will pre-scale and rotate the SVG before
rasterizing with agg to avoid bitmap artifacts.</p>
</div>
<div class="section" id="usage-example">
<h2>Usage example<a class="headerlink" href="#usage-example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SYMBOL</span>
  <span class="n">NAME</span> <span class="s2">&quot;svgsymbol&quot;</span>
  <span class="n">TYPE</span> <span class="n">SVG</span>
  <span class="n">IMAGE</span> <span class="s2">&quot;/path/to/symbol.svg&quot;</span>
<span class="n">END</span>
</pre></div>
</div>
<p>... once defined, the symbol is used within the mapfile like any other.</p>
</div>
<div class="section" id="backwards-compatibility-issues">
<h2>Backwards Compatibility Issues<a class="headerlink" href="#backwards-compatibility-issues" title="Permalink to this headline">¶</a></h2>
<p>There are no compatibility issues with existing mapfiles. The SVG symbol type
is already allowed within a SYMBOLSET. SVG Symbol support will be disabled by
default. Enabling it will require installation of the libsvg-cairo library
available from
* <a class="reference external" href="http://cairographics.org/snapshots/libsvg-cairo-0.1.6.tar.gz">http://cairographics.org/snapshots/libsvg-cairo-0.1.6.tar.gz</a></p>
</div>
<div class="section" id="affected-files">
<h2>Affected Files<a class="headerlink" href="#affected-files" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>mapserver.h</li>
<li>mapdraw.c</li>
<li>mapdummyrenderer.c</li>
<li>maprendering.c</li>
<li>mapsymbol.c</li>
<li>mapsymbol.h</li>
<li>mapcairo.c</li>
<li>mapagg.cpp</li>
<li>configure.in</li>
</ul>
</div>
<div class="section" id="ticket-id">
<h2>Ticket Id<a class="headerlink" href="#ticket-id" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/mapserver/mapserver/issues/3671">https://github.com/mapserver/mapserver/issues/3671</a></li>
</ul>
</div>
<div class="section" id="voting-history">
<h2>Voting History<a class="headerlink" href="#voting-history" title="Permalink to this headline">¶</a></h2>
<p>+1 from DanielM, SteveW, ThomasB, SteveL, MichaelS, AssefaY</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../../about.html" title="About">About</a><br>
<a href="../../products.html" title="Products">Products</a><br>
<a href="../../community/index.html" title="Community">Community</a><br>
<a href="../index.html" title="Development">Development</a><br>
<a href="../../download.html" title="Downloads">Downloads</a><br>
<a href="../../documentation.html" title="Documentation">Documentation</a><br>
<a href="../../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">MS RFC 73: Improved SVG symbols support</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#technical-solution">Technical Solution</a></li>
<li><a class="reference internal" href="#existing-partial-implementation">Existing Partial Implementation</a></li>
<li><a class="reference internal" href="#usage-example">Usage example</a></li>
<li><a class="reference internal" href="#backwards-compatibility-issues">Backwards Compatibility Issues</a></li>
<li><a class="reference internal" href="#affected-files">Affected Files</a></li>
<li><a class="reference internal" href="#ticket-id">Ticket Id</a></li>
<li><a class="reference internal" href="#voting-history">Voting History</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Open Source Geospatial Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
    </div>

    

    
  </body>
</html>