<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Image Formats &#8212; MapServer 7.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0 documentation" href="../index.html" />
    <link rel="up" title="MapCache 1.4" href="index.html" />
    <link rel="next" title="Tileset Dimensions" href="dimensions.html" />
    <link rel="prev" title="Cache Types" href="caches.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        <img src="../_static/flagicons/en.png" alt="en" title="en" border="0" width="18px" height="13px"/>
        
          <a href="../de/mapcache/formats.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
        
        
          <a href="../es/mapcache/formats.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
        
        
          <a href="../zh_cn/mapcache/formats.html"><img src="../_static/flagicons/zh_cn.png" alt="zh_cn" title="zh_cn" border="0" /></a>
        

    </td>
  </tr>
</table>



  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="image-formats">
<span id="mapcache-formats"></span><h1>Image Formats<a class="headerlink" href="#image-formats" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Thomas Bonfort</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">tbonfort at terriscope.fr</td>
</tr>
</tbody>
</table>
<p>MapCache allows you to configure how the image should be saved to a cache once
it has been requested from a source. The JPEG format should mostly be used for
raster imagery, whereas the PNG format is most useful for vector based imagery
where there are large uniform areas.</p>
<div class="section" id="jpeg-format">
<span id="mapcache-jpeg-format"></span><h2>JPEG Format<a class="headerlink" href="#jpeg-format" title="Permalink to this headline">¶</a></h2>
<p>The JPEG format saves tiles to JPEG. You can configure the JPEG compression
level (from 1 to 100) and the colorspace that should be used (RGB or YCbCr)</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;format</span> <span class="na">name=</span><span class="s">&quot;myjpeg&quot;</span> <span class="na">type=</span><span class="s">&quot;JPEG&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;quality&gt;</span>85<span class="nt">&lt;/quality&gt;</span>
   <span class="nt">&lt;photometric&gt;</span>ycbcr<span class="nt">&lt;/photometric&gt;</span>
<span class="nt">&lt;/format&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><em>quality</em>: This is the typical JPEG quality setting. Values under 50 produce
lighter images but with notable compression artifacts. 100 should be avoided
as it produces very heavy images.</li>
<li><em>photometric</em>: By default the YCbCr colorspace is used as it produces images
that tend to be 2 to 3 times lighter. Use RGB if you don&#8217;t want the default.</li>
</ul>
</div>
<div class="section" id="png-format">
<span id="mapcache-png-format"></span><h2>PNG Format<a class="headerlink" href="#png-format" title="Permalink to this headline">¶</a></h2>
<p>The PNG format creates PNG images, with optional quantization (reduction of
the number of colors to create an 8-bit palleted PNG).</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;format</span> <span class="na">name=</span><span class="s">&quot;mypng&quot;</span> <span class="na">type=</span><span class="s">&quot;PNG&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;compression&gt;</span>fast<span class="nt">&lt;/compression&gt;</span>
   <span class="nt">&lt;colors&gt;</span>256<span class="nt">&lt;/colors&gt;</span>
<span class="nt">&lt;/format&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><em>compression</em>: Choose which zlib compression to apply to the image data.
Recognized values are &#8220;fast&#8221; and &#8220;best&#8221;. Omit the key to use the default
zlib compression.</li>
<li><em>colors</em>: Number of colors to use for quantization. Ommit this key to
produce 24 or 32 bit RGB/RGBA PNGs, or set to a value between 2 and 256
to create an 8-bit palleted PNG. The quantization step is destructive:
There is no guarantee that pixels will not have a noticeable shift in color
in the case when the tile contains many colors.</li>
</ul>
</div>
<div class="section" id="mixed-format">
<span id="mapcache-mixed-format"></span><h2>Mixed Format<a class="headerlink" href="#mixed-format" title="Permalink to this headline">¶</a></h2>
<p>There is a third special format which mixes JPEG and PNG compression depending
on the contents of the image. This format allows creation of caches for raster
imagery using JPEG compression (which is more efficient) on zones with imagery
data, and PNG compression (which supports trasnparency) on zones with no
imagery or on a boundary between imagery and emptiness.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;format</span> <span class="na">name=</span><span class="s">&quot;mymixed&quot;</span> <span class="na">type=</span><span class="s">&quot;MIXED&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;opaque&gt;</span>myjpeg<span class="nt">&lt;/opaque&gt;</span>
   <span class="nt">&lt;transparent&gt;</span>mypng<span class="nt">&lt;/transparent&gt;</span>
<span class="nt">&lt;/format&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><em>opaque</em>: The format to use when the image has only fully opaque pixels</li>
<li><em>transparent</em>: The format to use when the image has some transparent or
semi-opaque pixels.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Image Formats</a><ul>
<li><a class="reference internal" href="#jpeg-format">JPEG Format</a></li>
<li><a class="reference internal" href="#png-format">PNG Format</a></li>
<li><a class="reference internal" href="#mixed-format">Mixed Format</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Open Source Geospatial Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
    </div>

    

    
  </body>
</html>